{% extends "layout.html" %}
{% block body %}

  <form action="{{ url_for('add_entry') }}" method="post" class="add-entry">
    <dl>
      <dt>Title:
      <dd><input type="text" size="30" name="title">
      <dt>Text:
      <dd><textarea name="text" rows="5" cols="40"></textarea>
        <dt>Category:
      <dd><input type="text" size ="30" name="category">
      <dd><input type="submit" value="Share">
    </dl>
  </form>
    <br>
     <form action="{{ url_for('show_entries') }}" method="get">
        <label for="category-filter">Filter by catgeory:</label>
        <select name="category" id="category-filter" onchange="this.form.submit()">
            <option value="all">All</option>
            {% for cat in categories %}
                <option value="{{ cat }}" {% if cat ==filter_category %} selected {% endif %}>
                    {{ cat }}
                </option>
            {% endfor %}
        </select>
    </form>

  <ul class="entries">
  {% for entry in entries %}
    <li><h2>{{ entry.title }}</h2>{{ entry.text|safe }}
      {% if entry.category %}
      <p>Category: {{ entry.category }}</p>
        {% endif %}

        <form action="{{ url_for('del_entry', id=entry.id) }}" method="post">
            <input type="submit" value="Delete" >
        </form>
      </li>
  {% else %}
    <li><em>Unbelievable.  No entries here so far</em></li>
  {% endfor %}
  </ul>
{% endblock %}
